<!DOCTYPE html>
<?php 
session_start();
error_reporting(E_ALL);
ini_set("display_errors",'1');
//ini_set('include_path', '/var/www/html/html/admin/jpgraph');
require_once('jpgraph/src/jpgraph.php');  
require_once('jpgraph/src/jpgraph_bar.php');   
include("connect.php");
include("html_to_doc.inc.php");
if(isset($_REQUEST['go2'])){

$subject = $_REQUEST['subject'];
$eval= $_REQUEST['eval'];

$result = mysql_query("SELECT * FROM Question_Paper where Course_ID = '$subject' and Eval_ID='$eval'");

if(!$result or $result==null){
	echo "<script>alert('Error : No Question Papers Found');</script>";
	
}

echo "<link rel='stylesheet' href='style.css'>";
echo "<div class = 'wrapper'>
		<div class = 'container'>";
echo "<h2>Generated Question Papers for Evaluation :$eval</h2><br><br>";
echo "<center><table>
<tr>
<th>Generated By</th>
<th>ID</th>
<th>L1 Questions</th>
<th>L2 Questions</th>
<th>L3 Questions</th>
</tr>";
$options='';
$width = 600; $height = 200;
while($row = mysql_fetch_array($result))
{
$f=$row['QP_ID'];
$l1=$row['L1'];
$l2=$row['L2'];
$l3=$row['L3'];
$xdata=array($l1,$l2,$l3);
//$ydata=array(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20);
$bplot = new BarPlot($xdata);   
//$bplot2 = new BarPlot($ydata);   

echo "<tr>";
echo "<td>" . $row['S_ID'] . "</td>";
echo "<td>" . $row['QP_ID'] . "</td>";
echo "<td>" . $row['L1'] . "</td>";
echo "<td>" . $row['L2'] . "</td>";
echo "<td>" . $row['L3'] . "</td>";
echo "<td>";
$graph = new Graph($width,$height);
$graph->SetScale('intint');
//$lineplot=new LinePlot($xdata);

$bplot->SetColor('darkgray');   
//$bplot->SetWeight(1);   
  
// Adding bars to the praphic  
$graph->Add($bplot);  
$graph->Stroke();
echo "</td>";
echo "</tr>";
$options.="<OPTION VALUE=\"$f\">".$f."</OPTION>"; 
}
echo "</table></center>";
mysql_close($con);


}
?>

<br><br>
<h2>Choose the Question Paper ID to view</h2>
 
<form method="post" action="renderqp.php">
<SELECT name="qps">
<?php echo($options);?>		
</SELECT>
<button type="submit" name="display">Display</button>
</form>
